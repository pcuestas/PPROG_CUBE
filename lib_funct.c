#include "lib_funct.h"
#include "cube.h"
#include "print_c.h"
#include "solver.h"

#define MAX_CAD 500

static SDL_GLContext ctx;
static SDL_Window *window;

void quit(int rc)
{
    if (ctx)
        SDL_GL_DeleteContext(ctx);

    SDL_DestroyWindow(window);
    SDL_Quit();
    exit(rc);
}

void Render(int mov, double **s)
{
    static float color[8][3] = {
        {1.0, 1.0, 0.0},
        {1.0, 0.0, 0.0},
        {0.0, 0.0, 0.0},
        {0.0, 1.0, 0.0},
        {0.0, 1.0, 1.0},
        {1.0, 1.0, 1.0},
        {1.0, 0.0, 1.0},
        {0.0, 0.0, 1.0}};

    float cube[56][3] = {
        /*Cara 1*/
        {0.6, 0.6, 0.6},
        {0.6, 0.6, 0.2},
        {0.6, 0.6, -0.2},
        {0.6, 0.6, -0.6},
        {0.6, 0.2, -0.6},
        {0.6, -0.2, -0.6},
        {0.6, -0.6, -0.6},
        {0.6, -0.6, -0.2},
        {0.6, -0.6, 0.2},
        {0.6, -0.6, 0.6},
        {0.6, -0.2, 0.6},
        {0.6, 0.2, 0.6},
        {0.6, 0.2, 0.2},
        {0.6, 0.2, -0.2},
        {0.6, -0.2, -0.2},
        {0.6, -0.2, 0.2},

        /*Cara 2*/
        {0.2, 0.6, 0.6},
        {-0.2, 0.6, 0.6},
        {-0.6, 0.6, 0.6},
        {-0.6, 0.6, 0.2},
        {-0.6, 0.6, -0.2},
        {-0.6, 0.6, -0.6},
        {-0.2, 0.6, -0.6}, /*22*/
        {0.2, 0.6, -0.6},
        {0.2, 0.6, -0.2},
        {0.2, 0.6, 0.2},
        {-0.2, 0.6, 0.2},
        {-0.2, 0.6, -0.2}, /*27*/

        /*Cara 3*/
        {-0.6, 0.2, 0.6},
        {-0.6, 0.2, 0.2},
        {-0.6, 0.2, -0.2},
        {-0.6, 0.2, -0.6},
        {-0.6, -0.2, -0.6},
        {-0.6, -0.6, -0.6}, /*33*/
        {-0.6, -0.6, -0.2},
        {-0.6, -0.6, 0.2},
        {-0.6, -0.6, 0.6},
        {-0.6, -0.2, 0.6},
        {-0.6, -0.2, 0.2},
        {-0.6, -0.2, -0.2}, /*39*/

        /*Cara 4*/
        {-0.2, -0.6, 0.6},
        {-0.2, -0.6, 0.2},
        {-0.2, -0.6, -0.2},
        {-0.2, -0.6, -0.6},
        {0.2, -0.6, -0.6}, /*44*/
        {0.2, -0.6, -0.2},
        {0.2, -0.6, 0.2},
        {0.2, -0.6, 0.6}, /*47*/

        /*Cara 5*/
        {0.2, 0.2, 0.6},
        {0.2, -0.2, 0.6},
        {-0.2, -0.2, 0.6},
        {-0.2, 0.2, 0.6},

        /*Cara 6*/
        {0.2, 0.2, -0.6},
        {0.2, -0.2, -0.6},
        {-0.2, -0.2, -0.6},
        {-0.2, 0.2, -0.6}

    };

    sCube *sc = NULL;
    int i=0;

    if((sc=sCube_init())==NULL)
        return;
    
    glClearColor(0.0, 0.0, 0.0, 1.0);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glMatrixMode(GL_MODELVIEW);

    glBegin(GL_QUADS);

    /* "paint" all pieces */
    for (i=0;i<NPC;i++)
        paint_sPiece(&(sc->pc[i]), cube, s);
    free_sCube(sc);

    glEnd();

    if (mov == 1)
        glRotatef(2.0, 0, 0, 0);
    else if (mov == 2)
        glRotatef(2.0, 1.0, 0, 0);
    else if (mov == 3)
        glRotatef(2.0, 0, 1.0, 0);
    else if (mov == 4)
        glRotatef(2.0, 0, 0, 1.0);
    else
        glRotatef(1.0, 0, 0, 0);
}
